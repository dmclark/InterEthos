<% @title = 'New Category' %>

<% form_for(@category) do |f| %>
  <%= f.error_messages %>

  <p><%= label(:ontology, :id, 'Ontology') %><br />
	<% if params[:parent_id].to_i == 0 %>
      <strong><%= "New Root Ontology" %></strong>
      <%= hidden_field_tag("ontologies_category[ontology_id]", 0) %></p>
	<% else %>
      <strong><%= @ontology.name %></strong>
      <%= hidden_field_tag("ontologies_category[ontology_id]", @ontology.id) %></p>
	<% end %>

  <p><%= f.label :parent_category %><br />
    <%= tree_select(Category.find(:all, :conditions => "parent_id = 1"), 'category', 'parent_id', @category) %></p>

  <p><%= f.label :category_name %><br />
    <%= f.text_field :name %></p>

  <p><%= f.label :category_meta %><br />
    <%= f.text_area :meta, :rows => 4, :cols => 45 %></p>
  
  <%= hidden_field_tag("category[user_id]", current_user.id) %>

  <p><%= f.label "add similar" %><br />
    <%= check_box_tag 'add_similar' %></p>

  <p><%= f.submit 'Create' %></p>

<% end %>

<%= link_to 'Back', categories_path %>
<%= javascript_tag "$('category_name').focus()" %>